(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{336:function(t,e,r){"use strict";r.r(e);var n,o,c,l=r(12),d=r(8);r(45),r(9),r(22),r(47);e.default={get_list_products:(c=Object(d.a)(regeneratorRuntime.mark((function t(e,data){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("*** get_product method ***"),t.next=4,e.dispatch("request",{url:"/api/products",method:"post",data:data});case 4:if(!(r=t.sent).data.status){t.next=10;break}return console.log(r.data.results," request.data.results"),e.dispatch("setState",{payload:{key:"products",data:r.data.results}}),console.log(r.data," request.data"),t.abrupt("return",!0);case 10:return t.abrupt("return",r.data);case 13:return t.prev=13,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,13]])}))),function(t,e){return c.apply(this,arguments)}),cart_detail:(o=Object(d.a)(regeneratorRuntime.mark((function t(e,data){var r,n,o,c,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.dispatch("request",{url:"/cache/cart",method:"post",data:data});case 3:return r=t.sent,n=r.data,console.log(n," cart full"),n&&n.status&&n.results&&("single-order"===n.results.type&&(n.results.items.length&&(o=n.results.items.map((function(t){console.log(t.items," el items"),console.log(e.state," self.state.list_product");var r=e.state.products.filter((function(e){return e.id===t.items[0].id}));if(console.log(r," search_product"),r.length)return r[0].select_date=!0,r[0].qty=t.items[0].qty,r[0]})),c=o.filter((function(t){return"object"==Object(l.a)(t)})),console.log(c," cleaned_cart"),e.dispatch("setState",{payload:{key:"cart",data:c}})),e.dispatch("setState",{payload:{key:"notes",data:n.results.notes}})),"rp-order"===n.results.type&&(console.log(n.results," cart.results"),n.results.items.length&&(d=n.results.items.map((function(t){var r=t.items.map((function(r){var n=e.state.products.filter((function(e){if(console.log(e," prod get cart"),console.log(t," variant get cart"),e.id===r.id)return e}));return console.log(n,r,t),console.log("search_product, item, el"),{SKU:n[0].SKU,detail_id:n[0].detail[0].detail_id,discount_price:n[0].detail[0].discount_price,id:n[0].id,main_image:n[0].detail[0].main_image,name:n[0].name,normal_price:n[0].detail[0].normal_price,product_id:n[0].id,qty:r.qty,select_date:!0,variant:n[0].detail[0].variant}})),n=e.state.products.map((function(t){var e=r.filter((function(e){return e.id==t.id}));return e.length?e[0]:{SKU:t.SKU,detail_id:t.detail[0].detail_id,discount_price:t.detail[0].discount_price,id:t.id,main_image:t.detail[0].main_image,name:t.name,normal_price:t.detail[0].normal_price,product_id:t.id,qty:0,select_date:!1,variant:t.detail[0].variant}}));return{date:t.delivery_date,delivery_time:t.delivery_time,items:n}})),console.log(d," list_dates"),e.dispatch("setState",{payload:{key:"dates",data:d}}),e.dispatch("setState",{payload:{key:"rp_order",data:!0}})),e.dispatch("setState",{payload:{key:"notes",data:n.results.notes}}))),t.abrupt("return",r.data);case 10:t.prev=10,t.t0=t.catch(0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])}))),function(t,e){return o.apply(this,arguments)}),manage_cart:(n=Object(d.a)(regeneratorRuntime.mark((function t(e,data){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("manage_cart",JSON.stringify(data,null,2)),t.next=4,e.dispatch("request",{url:"/cache/manage/cart",method:"post",data:data});case 4:r=t.sent,console.log(r),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),function(t,e){return n.apply(this,arguments)})}}}]);