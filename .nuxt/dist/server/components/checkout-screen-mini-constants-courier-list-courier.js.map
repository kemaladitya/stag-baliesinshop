{"version":3,"file":"components/checkout-screen-mini-constants-courier-list-courier.js","sources":["webpack:///./components/Checkout/screen/mini/constants/courier/list-courier.vue?fbbe","webpack:///./components/Checkout/screen/mini/constants/courier/list-courier.vue","webpack:///./components/Checkout/screen/mini/constants/courier/list-courier.vue?1913","webpack:///./components/Checkout/screen/mini/constants/courier/list-courier.vue?87a7"],"sourcesContent":["import { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\n\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._ssrNode(\"<div class=\\\"d-flex flex-row\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"pl-2\\\" style=\\\"align-self: center; font-size: 14px; font-weight: 600\\\">\\n      Pilih Pengiriman\\n    </div> \"),_c(VSpacer),_vm._ssrNode(\" \"),_c(VBtn,{attrs:{\"color\":\"red\",\"icon\":\"\",\"text\":\"\"},on:{\"click\":function($event){_vm.select_courier_dialog = false}}},[_c(VIcon,[_vm._v(\"mdi-close\")])],1)],2),_vm._ssrNode(\" \"),(!_vm.courier.loading)?_vm._ssrNode(\"<div style=\\\"overflow-y: scroll !important; max-height: 450px !important;\\\">\",\"</div>\",_vm._l((_vm.courier.lists),function(cr,idx){return _c(VCard,{key:idx,staticClass:\"pa-2 pl-0\",class:!idx ? 'pb-0' : null,staticStyle:{\"text-align\":\"left\"},attrs:{\"flat\":\"\"}},[_c(VCard,{staticClass:\"d-flex flex-row ml-2 pa-3 pt-1 pb-1 mb-2\",staticStyle:{\"border-radius\":\"8px\"},attrs:{\"flat\":\"\",\"outlined\":\"\"},on:{\"click\":function($event){return _vm.select_courier(cr)}}},[_c('div',{staticStyle:{\"display\":\"grid\",\"padding\":\"0 15px\"}},[_c('img',{staticStyle:{\"height\":\"22px\",\"width\":\"60px\",\"align-self\":\"center\"},attrs:{\"src\":cr.logo,\"alt\":\"\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"pa-3\",staticStyle:{\"font-size\":\"12px\",\"padding\":\"5px 0 0 10px\"}},[_c('div',{staticStyle:{\"font-weight\":\"500\"}},[_vm._v(\"\\n            \"+_vm._s(cr.name)+\" - \"+_vm._s(cr.service)+\"\\n          \")]),_vm._v(\" \"),_c('div',{staticStyle:{\"font-weight\":\"500\"}},[_vm._v(\"Rp \"+_vm._s(cr.final_price.toLocaleString().replace(/,/g, \".\")))]),_vm._v(\" \"),_c('div',{staticStyle:{\"font-weight\":\"400\",\"padding-top\":\"7px\"}},[_vm._v(_vm._s(cr.description))])])])],1)}),1):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  props: {\n    courier: Object,\n    icons: Array,\n    take_icons: Object,\n    select_courier: Function,\n  },\n\n  data: () => ({\n    is_all_express: true,\n    parsed_product: {\n      product: [],\n      total: 0,\n    },\n    is_available_today: false,\n  }),\n\n  computed: {\n    is_available_express() {\n      return this.$store.state.is_available_express;\n    },\n\n    order_type() {\n      return this.$store.state.order_type;\n    },\n\n    store() {\n      return this.$store.state.store;\n    },\n\n    products() {\n      return this.$store.state.products;\n    },\n\n    cart() {\n      if (this.order_type === 'single-order') {\n        return this.$store.state.cart;\n      } else if (this.order_type === 'subscription-order') {\n        return this.$store.state.subscription_cart;\n      } else if (this.order_type === 'package-order') {\n        return this.$store.state.package_cart;\n      }\n    },\n\n    validate_express_delivery() {\n      try {\n        const filter_not_in = this.parsed_product.product.filter(_ => {\n          if (!_.express_delivery) {\n            return _;\n          }\n        });\n\n        return filter_not_in;\n      } catch (error) {\n        return [];\n      }\n    },\n  },\n\n  created() {\n    this.product_parser();\n  },\n\n  mounted() {\n    this.check_day_availability();\n  },\n\n  methods: {\n    express_delivery_description() {\n      if (!this.is_available_express) {\n        return \"Saat ini layanan “Express Delivery“ hanya tersedia di area tertentu\"\n      }\n\n      if (this.order_type === 'subscription-order') {\n        return \"Express Delivery tidak tersedia untuk pembelian Mode Langganan\";\n      } else if (this.order_type === 'package-order') {\n        return \"Express Delivery tidak tersedia untuk pembelian Parcel/Box\";\n      }\n\n      if (this.validate_express_delivery.length) {\n        return \"Hanya tersedia untuk produk Sari Roti dengan label khusus “Express Delivery”\";\n      }\n\n      return \"\";\n    },\n\n    check_day_availability() {\n      try {\n        const today = new Date().getDay();\n        const list_days = [];\n\n        this.parsed_product.product\n          .forEach(({ express_delivery_setup: { days } }) => {\n            days.forEach(day =>\n              !list_days.includes(day)\n                ? list_days.push(day)\n                : null\n            );\n          });\n\n        console.log(\"start check\");\n        if (list_days.length == 1 && list_days[0] == \"*\") {\n          this.is_available_today = true;\n        } else if (list_days.includes(today)) {\n          this.is_available_today = true;\n        } else {\n          this.is_available_today = false;\n\n          return;\n        }\n      } catch (error) {\n        this.is_available_today = false;\n\n        return;\n      }\n    },\n\n    express_delivery_validator(courier) {\n      let available = true;\n\n      const name = courier.split('|')[2];\n      const not_express_delivery_items = this.parsed_product\n        .product\n        .filter(({ express_delivery }) => !express_delivery);\n      const express_delivery_items = this.parsed_product\n        .product\n        .filter(({ express_delivery }) => express_delivery);\n\n      if (express_delivery_items.length) {\n        const now = new Date();\n        const time_now = (\n          now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours()\n        ) + \":\" + (\n            now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes()\n          );\n\n        express_delivery_items.forEach(item => {\n          const checker = +time_now.replace(\":\", \"\") > +item.express_delivery_setup.time.start.replace(\":\", \"\")\n            && +time_now.replace(\":\", \"\") <= +item.express_delivery_setup.time.end.replace(\":\", \"\");\n\n          if (available) {\n            available = checker;\n          }\n        });\n      }\n\n      if (name == \"Express Delivery\") {\n        const is_single_item = this.order_type === \"single-order\";\n        const is_all_express = !not_express_delivery_items.length;\n        const is_all_time_available = available;\n\n        return !(\n          is_single_item\n          && is_all_express\n          && is_all_time_available\n          && this.is_available_today\n          && this.is_available_express\n        );\n      }\n\n      return false;\n    },\n\n    product_parser() {\n      let total = 0;\n      const product = [];\n\n      this.cart.forEach(el => {\n        const find = this.products\n          .filter(product =>\n            product.id === el.id\n            && product.SKU === el.sku\n          );\n\n        if (find.length) {\n          product.push({\n            id: find[0].id,\n            sku: find[0].SKU,\n            detail_id: find[0].variant[0],\n            main_image: find[0].main_image,\n            name: find[0].name,\n            normal_price: find[0].normal_price,\n            discount_price: find[0].discount_price,\n            is_promo: find[0].is_promo,\n            qty: el.qty,\n            express_delivery: find[0].express_delivery,\n            express_delivery_setup: find[0].express_delivery_setup,\n          });\n\n          if (!find[0].express_delivery) this.is_all_express = false;\n\n          total += (find[0].discount_price || find[0].normal_price) * el.qty;\n        }\n      })\n\n      this.parsed_product = { product, total };\n    },\n  },\n}\n","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list-courier.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list-courier.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./list-courier.vue?vue&type=template&id=020f1291&\"\nimport script from \"./list-courier.vue?vue&type=script&lang=js&\"\nexport * from \"./list-courier.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"0aef00e0\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAJA;AAOA;AACA;AACA;AACA;AACA;AAFA;AAIA;AANA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAxCA;AACA;AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAKA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAAA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AAMA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAcA;AAEA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AAlIA;AAnEA;;AC7IA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}