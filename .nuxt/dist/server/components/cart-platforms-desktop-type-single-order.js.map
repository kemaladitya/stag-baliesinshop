{"version":3,"file":"components/cart-platforms-desktop-type-single-order.js","sources":["webpack:///./components/General.js","webpack:///./components/Cart/Platforms/desktop/type/single-order.vue?8a4f","webpack:///./components/Cart/Platforms/desktop/type/single-order.vue","webpack:///./components/Cart/Platforms/desktop/type/single-order.vue?3029","webpack:///./components/Cart/Platforms/desktop/type/single-order.vue?62c7"],"sourcesContent":["export default {\n  get_list_products: async (self, data) => {\n    try {\n      // console.log('*** get_product method ***')\n\n      const request = await self.dispatch('request', {\n        url: '/api/products',\n        method: 'post',\n        data\n      })\n\n      if (request.data.status) {\n        // console.log(request.data.results, ' request.data.results')\n        self.dispatch('setState', {\n          payload: {\n            key: 'products',\n            data: request.data.results.sort((a, b) => b.priority - a.priority)\n          }\n        })\n\n        // console.log(request.data, ' request.data')\n\n        return true\n      }\n\n      return request.data\n    } catch (e) {\n      console.log(e)\n\n      return e\n    }\n  },\n\n  cart_detail: async (self, data) => {\n    try {\n      const request = await self.dispatch('request', {\n        url: '/cache/cart',\n        method: 'post',\n        data\n      })\n      const cart =  request.data\n\n      console.log(cart, ' cart full')\n\n      if (cart && cart.status && cart.results) {\n        if (cart.results.type === 'single-order') {\n          if (cart.results.items.length) {\n            const list_cart = cart.results.items.map(el => {\n              console.log(el.items, ' el items')\n              console.log(self.state, ' self.state.list_product')\n              const search_product = self.state.products.filter(\n                prod => prod.id === el.items[0].id\n              )\n\n              console.log(search_product, ' search_product')\n\n              if (search_product.length) {\n                search_product[0].select_date = true\n                search_product[0].qty = el.items[0].qty\n\n                return search_product[0]\n              }\n            })\n            const cleaned_cart = list_cart.filter(el => typeof el == 'object')\n\n            console.log(cleaned_cart, ' cleaned_cart')\n\n            self.dispatch('setState', {\n              payload: {\n                key: 'cart',\n                data: cleaned_cart\n              }\n            })\n          }\n\n          self.dispatch('setState', {\n            payload: {\n              key: 'notes',\n              data: cart.results.notes\n            }\n          })\n        }\n\n        if (cart.results.type === 'rp-order') {\n          console.log(cart.results, ' cart.results')\n          if (cart.results.items.length) {\n            const list_dates = cart.results.items.map(el => {\n              const list_items = el.items.map(item => {\n                const search_product = self.state.products.filter(prod => {\n                  console.log(prod, ' prod get cart')\n                  console.log(el, ' variant get cart')\n                  if (prod.id === item.id) {\n                    return prod\n                  }\n                })\n                console.log(search_product, item, el)\n                console.log('search_product, item, el')\n                const _item = {\n                  SKU: search_product[0].SKU,\n                  detail_id: search_product[0].detail[0].detail_id,\n                  discount_price: search_product[0].detail[0].discount_price,\n                  id: search_product[0].id,\n                  main_image: search_product[0].detail[0].main_image,\n                  name: search_product[0].name,\n                  normal_price: search_product[0].detail[0].normal_price,\n                  product_id: search_product[0].id,\n                  qty: item.qty,\n                  select_date: true,\n                  variant: search_product[0].detail[0].variant\n                }\n\n                return _item\n              })\n              \n                const merge_items = self.state.products.map(el => {\n                  const find_selected = list_items.filter(s_el => s_el.id == el.id)\n\n                  if (find_selected.length) return find_selected[0]\n\n                  const _item = {\n                    SKU: el.SKU,\n                    detail_id: el.detail[0].detail_id,\n                    discount_price: el.detail[0].discount_price,\n                    id: el.id,\n                    main_image: el.detail[0].main_image,\n                    name: el.name,\n                    normal_price: el.detail[0].normal_price,\n                    product_id: el.id,\n                    qty: 0,\n                    select_date: false,\n                    variant: el.detail[0].variant\n                  }\n\n                  return _item\n                })\n\n                return {\n                  date: el.delivery_date,\n                  delivery_time: el.delivery_time,\n                  items: merge_items\n                }\n            })\n\n            console.log(list_dates, ' list_dates')\n\n            self.dispatch('setState', {\n              payload: {\n                key: 'dates',\n                data: list_dates\n              }\n            })\n\n            self.dispatch('setState', {\n              payload: {\n                key: 'rp_order',\n                data: true\n              }\n            })\n          }\n\n          self.dispatch('setState', {\n            payload: {\n              key: 'notes',\n              data: cart.results.notes\n            }\n          })\n        }\n      }\n      // const request = await self.dispatch('request', {\n      //   url: '/cache/cart',\n      //   method: 'post',\n      //   data\n      // })\n      return request.data\n    } catch (error) {\n      // console.log(error)\n    }\n  },\n\n  manage_cart: async (self, data) => {\n    try {\n      console.log('@manage.cart')\n      console.log('manage_cart', JSON.stringify(data, null, 2))\n      const request = await self.dispatch('request', {\n        url: '/cache/manage/cart',\n        method: 'post',\n        data\n      })\n\n      if ('status' in request) {\n        return request\n      } else {\n        console.log('@cart_request_failed |', request)\n        return {\n          status : 404,\n          data   : { status: false }\n        }\n      }\n    } catch (error) {\n      console.log('@manage_cart |', error)\n    }\n  },\n\n  cart_manager: async (self, data) => {\n    const request = await self\n      .$store\n      .dispatch('request', {\n        url   : '/cart',\n        method: 'post',\n        data,\n      })\n\n    console.log('!@cart_manager.request |', request.data)\n\n    if (request.status === 200 && request.data) {\n      self.$store.dispatch('setState', {\n        payload: {\n          key : 'order_type',\n          data: request.data.type || 'single-order'\n        },\n      })\n\n      const order_type = self.$store.state.order_type\n\n      if (order_type === 'single-order') {\n        self.$store.dispatch('setState', {\n          payload: {\n            key : 'cart',\n            data: request.data.items\n          },\n        })\n      } else if (order_type === 'subscription-order') {\n        self.$store.dispatch('setState', {\n          payload: {\n            key : 'subscription_cart',\n            data: request.data.items\n          },\n        })\n      } else if (order_type === 'package-order') {\n        self.$store.dispatch('setState', {\n          payload: {\n            key : 'package_cart',\n            data: request.data.items\n          },\n        })\n      }\n\n      return request.data\n    }\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.cart.length)?_vm._ssrNode(\"<div>\",\"</div>\",_vm._l((_vm.parsed_lists.product),function(item,index){return _vm._ssrNode(\"<div>\",\"</div>\",[_c('v-card',{staticClass:\"d-flex flex-row ma-1 mb-2 pr-1\",attrs:{\"outlined\":\"\"}},[_c('v-card',{staticClass:\"ma-1 pt-6\",attrs:{\"width\":\"25\",\"flat\":\"\",\"depressed\":\"\"},on:{\"click\":function($event){return _vm.manage_cart(item.id, item.detail_id, item.sku, 0, 'remove')}}},[_c('center',[_c('v-icon',{attrs:{\"color\":\"red\",\"small\":\"\"}},[_vm._v(\"mdi-close\")])],1)],1),_vm._v(\" \"),_c('v-card',{staticClass:\"d-flex flex-row\",attrs:{\"flat\":\"\",\"width\":\"100%\"}},[_c('v-card',{staticClass:\"ma-2 ml-0\",attrs:{\"flat\":\"\",\"outlined\":\"\"}},[_c('v-img',{attrs:{\"src\":item.main_image,\"width\":\"65\",\"height\":\"65\",\"loading\":\"lazy\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"pa-2\",staticStyle:{\"text-align\":\"left\"}},[_c('div',{staticStyle:{\"font-size\":\"13px\",\"max-width\":\"150px\",\"display\":\"inline-block\",\"min-width\":\"150px\",\"white-space\":\"nowrap\",\"overflow\":\"hidden !important\",\"text-overflow\":\"ellipsis\"}},[_vm._v(\"\\n              \"+_vm._s(item.name)+\"\\n            \")]),_vm._v(\" \"),_c('div',{staticClass:\"d-flex flex-row\"},[_c('div',{staticStyle:{\"font-size\":\"13px\",\"font-weight\":\"600\"}},[(item.is_promo)?_c('div',[_vm._v(\"\\n                  Rp \"+_vm._s(item.discount_price\n                      .toLocaleString()\n                      .replace(/,/g, '.'))+\", -\\n                \")]):_vm._e(),_vm._v(\" \"),_c('div',{style:(item.is_promo\n                      ? 'color: darkgrey !important; text-decoration-line: line-through !important; font-size: 8px'\n                      : null)},[_vm._v(\"\\n                  Rp \"+_vm._s(item.normal_price\n                      .toLocaleString()\n                      .replace(/,/g, '.'))+\", -\\n                \")]),_vm._v(\" \"),(!item.is_promo)?_c('div',[_vm._v(\"Â \")]):_vm._e()])])])],1),_vm._v(\" \"),_c('div',{staticClass:\"d-flex flex-row pl-1 pr-1\",staticStyle:{\"align-self\":\"center\"}},[_c('div',[_c('v-btn',{staticStyle:{\"padding\":\"0\",\"border-color\":\"#4caf50 !important\"},attrs:{\"color\":\"success\",\"max-width\":\"26\",\"width\":\"26\",\"min-width\":\"26\",\"max-height\":\"26\",\"height\":\"26\",\"min-height\":\"26\",\"depressed\":\"\",\"outlined\":\"\",\"rounded\":\"\",\"small\":\"\",\"text\":\"\"},on:{\"click\":function($event){return _vm.manage_cart(item.id, item.detail_id.id, item.sku, 1, 'reduce')}}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"mdi-minus\")])],1)],1),_vm._v(\" \"),_c('v-card',{staticClass:\"pt-1 text-center\",staticStyle:{\"font-size\":\"14px\"},attrs:{\"min-width\":\"30\",\"flat\":\"\"}},[_vm._v(\"\\n            \"+_vm._s(item.qty)+\"\\n          \")]),_vm._v(\" \"),_c('div',[_c('v-btn',{staticStyle:{\"padding\":\"0\",\"border-color\":\"#4caf50 !important\"},attrs:{\"color\":\"success\",\"max-width\":\"26\",\"width\":\"26\",\"min-width\":\"26\",\"max-height\":\"26\",\"height\":\"26\",\"min-height\":\"26\",\"depressed\":\"\",\"outlined\":\"\",\"rounded\":\"\",\"small\":\"\",\"text\":\"\"},on:{\"click\":function($event){return _vm.manage_cart(item.id, item.detail_id.id, item.sku, 1, 'add')}}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"mdi-plus\")])],1)],1)],1)],1)],1)}),0):_vm._ssrNode(\"<div>\",\"</div>\",[_c('center',{staticStyle:{\"margin-top\":\"30vh\",\"margin-bottom\":\"30px\"}},[_c('div',{staticStyle:{\"width\":\"264px\"}},[_c('v-icon',{staticStyle:{\"font-size\":\"120px\"},attrs:{\"color\":\"grey lighten-2\"}},[_vm._v(\"mdi-cart-outline\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"font-weight\":\"600\",\"border-radius\":\"5px\",\"width\":\"fit-content\",\"font-size\":\"13px\"}},[_vm._v(\"\\n          Keranjang belanja Anda kosong.\\n        \")])],1)])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport API from '@/components/General'\n\nexport default {\n  components: {},\n\n  computed: {\n    site() {\n      return this.$store.state.site\n    },\n\n    order_type() {\n      return this.$store.state.order_type\n    },\n\n    store() {\n      return this.$store.state.store\n    },\n\n    list_product() {\n      return this.$store.state.products\n    },\n\n    cart() {\n      return this.$store.state.cart\n    },\n\n    parsed_lists() {\n      let total = 0\n      const product = []\n\n      this.cart.forEach(el => {\n        const find = this.list_product.filter(\n          product => product.id === el.id && product.SKU === el.sku\n        )\n\n        if (find.length) {\n          product.push({\n            id             : find[0].id,\n            sku            : find[0].SKU,\n            detail_id      : find[0].variant[0],\n            main_image     : find[0].main_image,\n            name           : find[0].name,\n            normal_price   : find[0].normal_price,\n            discount_price : find[0].discount_price,\n            is_promo       : find[0].is_promo,\n            qty            : el.qty\n          })\n\n          total += (find[0].discount_price || find[0].normal_price) * el.qty\n        }\n      })\n\n      return { product, total }\n    }\n  },\n\n  methods: {\n    async manage_cart(id, detail_id, sku, qty, method) {\n      console.log(id, detail_id, sku, qty, method)\n      this.$store.dispatch('setState', {\n        payload: {\n          key: 'loading',\n          data: true\n        }\n      })\n\n      await API.cart_manager(this, {\n        method,\n        info: {\n          mode: 'single-order',\n          item: { id, detail_id, sku, qty },\n          store: {\n            name   : this.site.store,\n            source : this.site.source,\n            uuid   : this.site.uuid,\n            outlet : this.site.category,\n          },\n        },\n      })\n\n      this.$store.dispatch('setState', {\n        payload: {\n          key: 'loading',\n          data: false\n        }\n      })\n    },\n  }\n}\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./single-order.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./single-order.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./single-order.vue?vue&type=template&id=01d86906&\"\nimport script from \"./single-order.vue?vue&type=script&lang=js&\"\nexport * from \"./single-order.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"5fdbd7e7\"\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\ninstallComponents(component, {VBtn,VCard,VIcon,VImg})\n"],"mappings":";;;;;;;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAHA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AAFA;AADA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAFA;AADA;AAMA;AACA;AACA;AACA;AACA;AACA;AAFA;AADA;AAMA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAcA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAcA;AACA;AAEA;AACA;AACA;AACA;AAHA;AAKA;AAEA;AAEA;AACA;AACA;AACA;AAFA;AADA;AAOA;AACA;AACA;AACA;AAFA;AADA;AAMA;AACA;AACA;AACA;AACA;AACA;AAFA;AADA;AAMA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAEA;AACA;AAGA;AACA;AACA;AAHA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AADA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AADA;AAMA;AACA;AACA;AACA;AACA;AAFA;AADA;AAMA;AACA;AACA;AACA;AACA;AAFA;AADA;AAMA;AACA;AACA;AACA;AACA;AAzPA;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAYA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AAjDA;AAmDA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AADA;AAOA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAJA;AAHA;AAFA;AAcA;AACA;AACA;AACA;AAFA;AADA;AAMA;AACA;AA/BA;AAtDA;;AC1IA;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}